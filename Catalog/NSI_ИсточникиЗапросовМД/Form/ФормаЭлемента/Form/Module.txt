&НаКлиенте
Перем ПредыдущаяСтрока;

&НаКлиенте
Процедура НастройкиЗапросовПриАктивизацииСтроки(Элемент)
	Если Не Элемент.ТекущиеДанные = Неопределено Тогда
		Если Не ПредыдущаяСтрока=Неопределено Тогда
			ОбновитьДанныеМетодаНаКлиенте(ПредыдущаяСтрока);
		КонецЕсли;
		ТекущиеДанные = Элемент.ТекущиеДанные;
		ЗаполнитьЗначенияСвойств(ЭтаФорма, ТекущиеДанные);
		ПрочитатьДанныеМетода();
		ПредыдущаяСтрока = ТекущиеДанные;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ПрочитатьДанныеМетода()
	Если ЗначениеЗаполнено(СписокПараметровОжидаемыхОтИсточникаЗапроса) Тогда
		СписокПараметровМетода.Загрузить(NSI_РаботаСМастерДаннымиСервер.ПрочитатьОбъектИзXML(СписокПараметровОжидаемыхОтИсточникаЗапроса));
	Иначе
		СписокПараметровМетода.Очистить();
	КонецЕсли;
КонецПроцедуры


&НаСервере
Процедура ОбновитьТекущуюСтрокуМетода()
	СписокПараметровОжидаемыхОтИсточникаЗапроса = NSI_РаботаСМастерДаннымиСервер.ЗаписатьОбъектВXML(СписокПараметровМетода.Выгрузить());
КонецПроцедуры

&НаКлиенте
Процедура ОбновитьДанныеМетодаНаКлиенте(СтрокаОбновления=Неопределено)
	Если СтрокаОбновления = Неопределено Тогда
		СтрокаОбновления = Элементы.НастройкиЗапросов.ТекущиеДанные;
	КонецЕсли;
	Если Не СтрокаОбновления = Неопределено Тогда
		ОбновитьТекущуюСтрокуМетода();
		ЗаполнитьЗначенияСвойств(СтрокаОбновления, ЭтаФорма);
	КонецЕсли;	
КонецПроцедуры



&НаКлиенте
Процедура ГруппаОписанияМетодаЗапросаПриСменеСтраницы(Элемент, ТекущаяСтраница)
	ОбновитьДанныеМетодаНаКлиенте();
КонецПроцедуры

&НаКлиенте
Процедура НастройкиЗапросовПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	ОбновитьДанныеМетодаНаКлиенте();
КонецПроцедуры

&НаКлиенте
Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
	ОбновитьДанныеМетодаНаКлиенте();
КонецПроцедуры

&НаКлиенте
Процедура ВыполнитьФункциюСПроверочнымиДанными(Команда)
	ИмяТекущейСтраницы = Элементы.ГруппаОписанияМетодаЗапроса.ТекущаяСтраница.Имя;
	СтруктураМетодаЗапроса = NSI_РаботаСМастерДаннымиРаботаСВнешнимиСистемами.ПолучитьОписаниеМетодаЗапросаПоИсточнику(Объект.Ссылка, Элементы.НастройкиЗапросов.ТекущиеДанные.ИмяМетодаЗапроса);
	NSI_РаботаСМастерДаннымиРаботаСВнешнимиСистемами.ПроверитьРаботуМетода(СтруктураМетодаЗапроса, СтрЗаменить(ИмяТекущейСтраницы, "Страница_", ""));
КонецПроцедуры

ПредыдущаяСтрока = Неопределено;
БолдИталик = Новый Шрифт(,,Истина,Истина);
ТекстКомментарияКФункциям = Новый ФорматированнаяСтрока("Результат выполнения функции необходимо присвоить переменной ", Новый ФорматированнаяСтрока("Результат", БолдИталик),
							Символы.ПС+"Параметры метода передаются в процедуру в переменную ", Новый ФорматированнаяСтрока("Параметры", БолдИталик));
