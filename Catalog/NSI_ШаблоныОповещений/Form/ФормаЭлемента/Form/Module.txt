

&НаКлиенте
Процедура АлгоритмВычисленияАдресатаОткрытие(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
КонецПроцедуры

&НаСервере
Процедура ПроверитьЗначениеНаСервере(ИмяРеквизита)
	АлгоритмВычисления  = Объект[ИмяРеквизита];
	СтруктураПараметров = Новый Структура;
	Для Каждого Параметр Из СписокПараметров Цикл
		СтруктураПараметров.Вставить(Параметр.Параметр, Параметр.ЗначениеДляПроверки);
	КонецЦикла;
	Результат = Справочники.ШаблоныОповещений.ВычислениеЗначения(АлгоритмВычисления, СтруктураПараметров, Истина);
КонецПроцедуры


&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	ТекущийОбъект.ИспользуемыеПараметры.Очистить();
	Для Каждого Параметр Из СписокПараметров Цикл
		НоваяСтрока = ТекущийОбъект.ИспользуемыеПараметры.Добавить();
		НоваяСтрока.Параметр = Параметр.Параметр;
		НоваяСтрока.ТипПараметра = Новый ХранилищеЗначения(Параметр.ТипПараметра);
		НоваяСтрока.ЗначениеДляПроверки = Новый ХранилищеЗначения(Параметр.ЗначениеДляПроверки);
	КонецЦикла;
КонецПроцедуры


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	СписокПараметров.Очистить();
	ЗначениеОбъекта = РеквизитФормыВЗначение("Объект");
	Для Каждого Параметр Из ЗначениеОбъекта.ИспользуемыеПараметры Цикл
		НоваяСтрока = СписокПараметров.Добавить();
		НоваяСтрока.Параметр = Параметр.Параметр;
		НоваяСтрока.ТипПараметра = Параметр.ТипПараметра.Получить();
		НоваяСтрока.ЗначениеДляПроверки = Параметр.ЗначениеДляПроверки.Получить();
	КонецЦикла;
КонецПроцедуры


&НаКлиенте
Процедура ПроверитьАлгоритм(Команда)
	ИмяЭлемента = СтрЗаменить(Команда.Имя,"Проверить","");
	ПроверитьЗначениеНаСервере(ИмяЭлемента);
КонецПроцедуры

&НаСервере
Процедура ПрименитьУсловноеОформлениеФормыНаСервере()
	Элементы.ДекорацияДляШаблонаОповещенияОДняхРожденияКонтактов.Видимость = ЭтоШаблонОповещенияОДняхРожденияКонтактов;
	Элементы.СтраницаАдресаты.Доступность 						= НЕ ЭтоШаблонОповещенияОДняхРожденияКонтактов;
	Элементы.АлгоритмВычисленияАдресата.Доступность 			= НЕ ЭтоШаблонОповещенияОДняхРожденияКонтактов;
	Элементы.ПроверитьАлгоритмВычисленияАдресата.Доступность 	= НЕ ЭтоШаблонОповещенияОДняхРожденияКонтактов;
КонецПроцедуры
 

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
	
	//(26@expert20.ru (Прокофьев А.) 15.08.11
	// Задача: CRM. Для элемента = Константа.ДниРожденияШаблонОповещения нужно отключить некторые реквизиты
	//ЭтоШаблонОповещенияОДняхРожденияКонтактов = ТекущийОбъект.Ссылка = Константы.ДниРожденияШаблонОповещения.Получить();
	//ПрименитьУсловноеОформлениеФормыНаСервере();
	//26@expert20.ru)
	
КонецПроцедуры


&НаКлиенте
Процедура ДекорацияСправкаНажатие(Элемент)
	ОткрытьСправкуФормы();
КонецПроцедуры

