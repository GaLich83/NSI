Перем СоответствиеПолей Экспорт;
Перем ОписаниеПолей Экспорт;

Процедура ПриЗаписи(Отказ)
	NSI_РаботаСМастерДаннымиСервер.ОбновитьЗначенияПолейИИндексыПослеЗаписи(Ссылка, ОписаниеПолей, СоответствиеПолей);
	NSI_РаботаСМастерДаннымиСервер.ОбновитьХэшКлючевыхПолей(Ссылка, ОписаниеПолей, СоответствиеПолей);
КонецПроцедуры

Процедура ПередЗаписью(Отказ)
	Наименование = NSI_РаботаСМастерДаннымиСервер.ПолучитьПредставлениеКлюча(ОписаниеПолей, СоответствиеПолей);
КонецПроцедуры

Функция ДополнитьСтруктуруИзмененийВычисляемымиРеквизитами() Экспорт
	ТаблицаДопРеквизитов = NSI_Логирование.СоздатьПустуюТаблицуРеквизитов();
	Для Каждого СтрокаПоля Из ОписаниеПолей Цикл
		ЗначениеПоля = Неопределено;
		СтрокаДопРеквизита = ТаблицаДопРеквизитов.Добавить();
		СтрокаДопРеквизита.Имя = СтрокаПоля.ИмяПоля;
		СтрокаДопРеквизита.Синоним = СтрокаПоля.СинонимПоля;
		СоответствиеПолей.Свойство(СтрокаПоля.ИмяПоля, СтрокаДопРеквизита.Значение)
	КонецЦикла;
	Возврат ТаблицаДопРеквизитов;
КонецФункции

Если ЗначениеЗаполнено(Ссылка) Тогда
	ПроверкаГруппы = Ссылка.ЭтоГруппа;
Иначе
	ПроверкаГруппы = ЭтоГруппа;
КонецЕсли;
ОписаниеПолей = NSI_РаботаСМастерДаннымиСерверПовторноеИспользование.ПолучитьОписаниеПолей(Ссылка.Владелец, ПроверкаГруппы);
СоответствиеПолей = NSI_РаботаСМастерДаннымиСервер.ПолучитьТекущиеЗначенияПолей(Ссылка);





